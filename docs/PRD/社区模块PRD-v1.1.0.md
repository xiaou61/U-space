# ç¤¾åŒºæ¨¡å—PRD-v1.1.0

## ç‰ˆæœ¬ä¿¡æ¯
- **ç‰ˆæœ¬å·**: v1.1.0
- **å‘å¸ƒæ—¥æœŸ**: 2025å¹´10æœˆ
- **åŸºç¡€ç‰ˆæœ¬**: v1.0.0
- **ä¸»è¦æ›´æ–°**: æ™ºèƒ½æ¨è + è¯é¢˜æ ‡ç­¾ + æ€§èƒ½ä¼˜åŒ– + AIæ‘˜è¦

---

## 1. ç‰ˆæœ¬æ¦‚è¿°

### 1.1 å‡çº§èƒŒæ™¯
ç¤¾åŒºæ¨¡å—v1.0.0å·²ä¸Šçº¿å¹¶ç¨³å®šè¿è¡Œ,å®ç°äº†å¸–å­å‘å¸ƒã€è¯„è®ºäº’åŠ¨ã€åˆ†ç±»ç®¡ç†ç­‰åŸºç¡€åŠŸèƒ½ã€‚é€šè¿‡ç”¨æˆ·åé¦ˆå’Œæ•°æ®åˆ†æå‘ç°ï¼Œå½“å‰ç‰ˆæœ¬å­˜åœ¨ä»¥ä¸‹å¾…ä¼˜åŒ–çš„é—®é¢˜ï¼š

- **å†…å®¹å‘ç°éš¾**ï¼šç”¨æˆ·éš¾ä»¥å‘ç°ä¼˜è´¨å†…å®¹ï¼Œç¼ºå°‘æ™ºèƒ½æ¨èæœºåˆ¶
- **ç»„ç»‡ä¸æ¸…æ™°**ï¼šç¼ºå°‘è¯é¢˜æ ‡ç­¾ä½“ç³»ï¼Œå†…å®¹å½’ç±»ä¸å¤Ÿç²¾ç»†
- **äº¤äº’ä½“éªŒå¼±**ï¼šè¯„è®ºåŠŸèƒ½è¾ƒç®€å•ï¼Œç¼ºå°‘äºŒçº§å›å¤
- **æ€§èƒ½å¾…ä¼˜åŒ–**ï¼šé•¿åˆ—è¡¨åŠ è½½è¾ƒæ…¢ï¼Œç¼ºå°‘ç¼“å­˜ä¼˜åŒ–
- **åˆ›ä½œä½“éªŒå·®**ï¼šç¼ºå°‘è‰ç¨¿ä¿å­˜ï¼Œç¼–è¾‘ä¸­æ–­å†…å®¹ä¸¢å¤±
- **ä¸ªæ€§åŒ–ä¸è¶³**ï¼šæ— æ³•æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„ä¸ªäººä¸»é¡µå’Œå‘å¸–å†å²

### 1.2 æ ¸å¿ƒæ›´æ–°

#### åŠŸèƒ½å¢å¼º
- **çƒ­é—¨å¸–å­æ¨è**ï¼šæ™ºèƒ½æ¨èä¼˜è´¨å†…å®¹ï¼Œæå‡å†…å®¹æ›å…‰
- **è¯é¢˜æ ‡ç­¾ç³»ç»Ÿ**ï¼šæ”¯æŒå¤šæ ‡ç­¾ç®¡ç†ï¼Œç²¾ç»†åŒ–å†…å®¹åˆ†ç±»
- **äºŒçº§è¯„è®ºå›å¤**ï¼šæ”¯æŒè¯„è®ºçš„è¯„è®ºï¼Œå¢å¼ºäº’åŠ¨ä½“éªŒ
- **è‰ç¨¿ä¿å­˜åŠŸèƒ½**ï¼šè‡ªåŠ¨ä¿å­˜è‰ç¨¿ï¼Œé¿å…å†…å®¹ä¸¢å¤±
- **ç”¨æˆ·ä¸ªäººä¸»é¡µ**ï¼šæŸ¥çœ‹ç”¨æˆ·èµ„æ–™å’Œå‘å¸–å†å²
- **å¸–å­AIæ‘˜è¦**ï¼šAIè‡ªåŠ¨ç”Ÿæˆå¸–å­æ‘˜è¦ï¼Œæå‡é˜…è¯»ä½“éªŒ

#### æ€§èƒ½ä¼˜åŒ–
- **Redisç¼“å­˜ä¼˜åŒ–**ï¼šçƒ­é—¨å¸–å­ã€ç”¨æˆ·ä¿¡æ¯ç­‰æ•°æ®ç¼“å­˜
- **åˆ†é¡µåŠ è½½ä¼˜åŒ–**ï¼šæ— é™æ»šåŠ¨+è™šæ‹Ÿåˆ—è¡¨ï¼Œæå‡åŠ è½½é€Ÿåº¦
- **å›¾ç‰‡æ‡’åŠ è½½**ï¼šå›¾ç‰‡å»¶è¿ŸåŠ è½½ï¼Œå‡å°‘é¦–å±æ—¶é—´
- **æœç´¢æ€§èƒ½æå‡**ï¼šå…¨æ–‡ç´¢å¼•ä¼˜åŒ–ï¼Œæœç´¢é€Ÿåº¦æå‡

#### ç”¨æˆ·ä½“éªŒ
- **ç›¸å¯¹æ—¶é—´æ˜¾ç¤º**ï¼šå‹å¥½çš„æ—¶é—´å±•ç¤ºï¼ˆå¦‚"3åˆ†é’Ÿå‰"ï¼‰
- **è¡¨æƒ…é€‰æ‹©å™¨**ï¼šæ”¯æŒemojiè¡¨æƒ…è¾“å…¥
- **Markdownç¼–è¾‘å™¨å¢å¼º**ï¼šå®æ—¶é¢„è§ˆã€å·¥å…·æ ä¼˜åŒ–
- **å“åº”å¼ä¼˜åŒ–**ï¼šæ›´å¥½çš„ç§»åŠ¨ç«¯é€‚é…

### 1.3 æŠ€æœ¯é›†æˆ
- **Redisç¼“å­˜**: 7å¤©TTLï¼Œçƒ­é—¨å¸–å­ã€ç”¨æˆ·ä¿¡æ¯ç¼“å­˜
- **Coze AIå·¥ä½œæµ**: å¸–å­æ‘˜è¦ç”Ÿæˆï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
- **å…¨æ–‡ç´¢å¼•**: MySQLå…¨æ–‡ç´¢å¼•ï¼Œæå‡æœç´¢æ€§èƒ½
- **è™šæ‹Ÿæ»šåŠ¨**: å‰ç«¯è™šæ‹Ÿåˆ—è¡¨ï¼Œæ”¯æŒé•¿åˆ—è¡¨æµç•…æ»šåŠ¨

---

## 2. v1.0.0é—®é¢˜åˆ†æ

### 2.1 åŠŸèƒ½ç¼ºå¤±é—®é¢˜

| é—®é¢˜ | å½±å“ | ä¸¥é‡ç¨‹åº¦ |
|------|------|---------|
| æ— çƒ­é—¨æ¨èæœºåˆ¶ | ä¼˜è´¨å†…å®¹æ›å…‰ä¸è¶³ï¼Œç”¨æˆ·ç²˜æ€§ä½ | ğŸ”´ é«˜ |
| ç¼ºå°‘è¯é¢˜æ ‡ç­¾ | å†…å®¹ç»„ç»‡æ··ä¹±ï¼ŒæŸ¥æ‰¾å›°éš¾ | ğŸ”´ é«˜ |
| è¯„è®ºä»…æ”¯æŒä¸€çº§ | äº’åŠ¨å±‚çº§å•ä¸€ï¼Œè®¨è®ºæ·±åº¦ä¸å¤Ÿ | ğŸŸ¡ ä¸­ |
| æ— è‰ç¨¿ä¿å­˜ | ç¼–è¾‘ä¸­æ–­å†…å®¹ä¸¢å¤±ï¼Œç”¨æˆ·ä½“éªŒå·® | ğŸŸ¡ ä¸­ |
| æ— ç”¨æˆ·ä¸ªäººä¸»é¡µ | æ— æ³•äº†è§£å…¶ä»–ç”¨æˆ·ï¼Œç¤¾äº¤æ€§ä¸è¶³ | ğŸŸ¡ ä¸­ |
| æ— AIè¾…åŠ©åŠŸèƒ½ | åˆ›ä½œå’Œé˜…è¯»ä½“éªŒå¾…æå‡ | ğŸŸ¢ ä½ |

### 2.2 æ€§èƒ½é—®é¢˜

| é—®é¢˜ | å½±å“ | ä¸¥é‡ç¨‹åº¦ |
|------|------|---------|
| æ— ç¼“å­˜æœºåˆ¶ | çƒ­é—¨æ•°æ®é¢‘ç¹æŸ¥è¯¢æ•°æ®åº“ï¼Œæ€§èƒ½å·® | ğŸ”´ é«˜ |
| åˆ—è¡¨åŠ è½½æ…¢ | è¶…è¿‡100æ¡å¸–å­æ—¶å¡é¡¿æ˜æ˜¾ | ğŸŸ¡ ä¸­ |
| æœç´¢é€Ÿåº¦æ…¢ | LikeæŸ¥è¯¢æ€§èƒ½å·®ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³ | ğŸŸ¡ ä¸­ |
| å›¾ç‰‡åŠ è½½æ…¢ | åŸå›¾ç›´æ¥åŠ è½½ï¼Œé¦–å±åŠ è½½æ…¢ | ğŸŸ¢ ä½ |

### 2.3 ç”¨æˆ·ä½“éªŒé—®é¢˜

| é—®é¢˜ | å½±å“ | ä¸¥é‡ç¨‹åº¦ |
|------|------|---------|
| æ—¶é—´æ˜¾ç¤ºä¸å‹å¥½ | æ˜¾ç¤ºç»å¯¹æ—¶é—´ï¼Œä¸å¤Ÿç›´è§‚ | ğŸŸ¡ ä¸­ |
| Markdownç¼–è¾‘å™¨ç®€å• | åˆ›ä½œä½“éªŒä¸ä½³ | ğŸŸ¡ ä¸­ |
| æ— è¡¨æƒ…æ”¯æŒ | è¡¨è¾¾å—é™ï¼Œäº’åŠ¨æ€§å¼± | ğŸŸ¢ ä½ |
| ç§»åŠ¨ç«¯é€‚é…ä¸€èˆ¬ | ç§»åŠ¨ç«¯ä½“éªŒå¾…ä¼˜åŒ– | ğŸŸ¢ ä½ |

---

## 3. v1.1.0ä¼˜åŒ–æ–¹æ¡ˆ

### 3.1 çƒ­é—¨å¸–å­æ¨èç³»ç»Ÿ

#### 3.1.1 åŠŸèƒ½è¯´æ˜
- **ä½ç½®**ï¼šç¤¾åŒºé¦–é¡µé¡¶éƒ¨å±•ç¤ºçƒ­é—¨å¸–å­è½®æ’­/å¡ç‰‡
- **å±•ç¤ºå½¢å¼**ï¼šæ¨ªå‘è½®æ’­æˆ–ç½‘æ ¼å¡ç‰‡ï¼Œå±•ç¤º3-5ä¸ªçƒ­é—¨å¸–å­
- **æ›´æ–°é¢‘ç‡**ï¼šæ¯10åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡
- **æ¨èè§„åˆ™**ï¼šç»¼åˆç‚¹èµã€è¯„è®ºã€æ”¶è—ã€æµè§ˆé‡ç­‰ç»´åº¦è®¡ç®—çƒ­åº¦

#### 3.1.2 çƒ­åº¦ç®—æ³•
```
çƒ­åº¦åˆ†æ•° = ç‚¹èµæ•° Ã— 3 + è¯„è®ºæ•° Ã— 5 + æ”¶è—æ•° Ã— 8 + æµè§ˆæ•° Ã— 0.1 - æ—¶é—´è¡°å‡
æ—¶é—´è¡°å‡ = (å½“å‰æ—¶é—´ - å‘å¸ƒæ—¶é—´) / 24å°æ—¶ Ã— 10

ç­›é€‰æ¡ä»¶ï¼š
- å‘å¸ƒæ—¶é—´ï¼š72å°æ—¶å†…
- çŠ¶æ€ï¼šæ­£å¸¸ï¼ˆæœªä¸‹æ¶ã€æœªåˆ é™¤ï¼‰
- çƒ­åº¦åˆ†æ•°ï¼š>= 30
- æ•°é‡é™åˆ¶ï¼šTOP 10
```

#### 3.1.3 æ•°æ®ç»“æ„è®¾è®¡

**Redisç¼“å­˜è®¾è®¡**ï¼š
```
Key: community:hot:posts
Type: Sorted Set
Score: çƒ­åº¦åˆ†æ•°
Value: å¸–å­ID
TTL: 10åˆ†é’Ÿ
```

#### 3.1.4 æ¥å£è®¾è®¡

**è·å–çƒ­é—¨å¸–å­**
```
GET /community/posts/hot
å‚æ•°ï¼š
{
  "limit": 5  // è·å–æ•°é‡ï¼Œé»˜è®¤5
}

å“åº”ï¼š
{
  "code": 200,
  "data": [
    {
      "id": 123,
      "title": "å¸–å­æ ‡é¢˜",
      "content": "å¸–å­å†…å®¹æ‘˜è¦...",
      "authorName": "å¼ ä¸‰",
      "categoryName": "æŠ€æœ¯åˆ†äº«",
      "tags": ["Java", "Spring"],
      "likeCount": 45,
      "commentCount": 23,
      "collectCount": 18,
      "viewCount": 189,
      "hotScore": 285.5,
      "createTime": "2025-10-01 12:00:00"
    }
  ]
}
```

#### 3.1.5 å‰ç«¯å±•ç¤º

**çƒ­é—¨å¸–å­å¡ç‰‡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¥ çƒ­é—¨æ¨è                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ [å¡ç‰‡1]  â”‚ [å¡ç‰‡2]  â”‚ [å¡ç‰‡3]  â”‚         â”‚
â”‚ â”‚ æ ‡é¢˜     â”‚ æ ‡é¢˜     â”‚ æ ‡é¢˜     â”‚         â”‚
â”‚ â”‚ #æ ‡ç­¾    â”‚ #æ ‡ç­¾    â”‚ #æ ‡ç­¾    â”‚         â”‚
â”‚ â”‚ ğŸ‘45 ğŸ’¬23â”‚ ğŸ‘38 ğŸ’¬15â”‚ ğŸ‘52 ğŸ’¬30â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è¯é¢˜æ ‡ç­¾ç³»ç»Ÿ

#### 3.2.1 åŠŸèƒ½è¯´æ˜
- **æ ‡ç­¾ç®¡ç†**ï¼šæ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ ‡ç­¾
- **å¤šæ ‡ç­¾ç»‘å®š**ï¼šæ¯ä¸ªå¸–å­å¯å…³è”1-5ä¸ªæ ‡ç­¾
- **æ ‡ç­¾ç­›é€‰**ï¼šæ”¯æŒæŒ‰æ ‡ç­¾ç­›é€‰å¸–å­
- **æ ‡ç­¾ç»Ÿè®¡**ï¼šå±•ç¤ºæ ‡ç­¾ä¸‹çš„å¸–å­æ•°é‡
- **çƒ­é—¨æ ‡ç­¾**ï¼šè‡ªåŠ¨ç»Ÿè®¡çƒ­é—¨æ ‡ç­¾

#### 3.2.2 æ•°æ®åº“è®¾è®¡

**æ ‡ç­¾è¡¨ï¼ˆcommunity_tagï¼‰**ï¼š
```sql
CREATE TABLE community_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ ‡ç­¾ID',
    name VARCHAR(50) NOT NULL COMMENT 'æ ‡ç­¾åç§°',
    description VARCHAR(200) COMMENT 'æ ‡ç­¾æè¿°',
    color VARCHAR(20) DEFAULT '#409EFF' COMMENT 'æ ‡ç­¾é¢œè‰²',
    icon VARCHAR(50) COMMENT 'æ ‡ç­¾å›¾æ ‡',
    post_count INT DEFAULT 0 COMMENT 'å¸–å­æ•°é‡',
    follow_count INT DEFAULT 0 COMMENT 'å…³æ³¨æ•°é‡',
    sort_order INT DEFAULT 0 COMMENT 'æ’åºé¡ºåº',
    status INT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¯ç”¨ï¼Œ0-ç¦ç”¨',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    UNIQUE KEY uk_name (name),
    INDEX idx_post_count (post_count DESC),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç¤¾åŒºæ ‡ç­¾è¡¨';
```

**å¸–å­æ ‡ç­¾å…³è”è¡¨ï¼ˆcommunity_post_tagï¼‰**ï¼š
```sql
CREATE TABLE community_post_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'å…³è”ID',
    post_id BIGINT NOT NULL COMMENT 'å¸–å­ID',
    tag_id BIGINT NOT NULL COMMENT 'æ ‡ç­¾ID',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    
    UNIQUE KEY uk_post_tag (post_id, tag_id),
    INDEX idx_post_id (post_id),
    INDEX idx_tag_id (tag_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å¸–å­æ ‡ç­¾å…³è”è¡¨';
```

#### 3.2.3 æ¥å£è®¾è®¡

**æ ‡ç­¾ç®¡ç†æ¥å£**ï¼š
```
# å‰å°
GET  /community/tags                    # è·å–å¯ç”¨çš„æ ‡ç­¾åˆ—è¡¨
GET  /community/tags/hot                # è·å–çƒ­é—¨æ ‡ç­¾ï¼ˆæŒ‰å¸–å­æ•°æ’åºï¼‰
GET  /community/tags/{id}/posts         # è·å–æ ‡ç­¾ä¸‹çš„å¸–å­

# åå°
POST   /admin/community/tags            # åˆ›å»ºæ ‡ç­¾
PUT    /admin/community/tags/{id}       # æ›´æ–°æ ‡ç­¾
DELETE /admin/community/tags/{id}       # åˆ é™¤æ ‡ç­¾
POST   /admin/community/tags/list       # æ ‡ç­¾åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
```

**å¸–å­åˆ›å»º/ç¼–è¾‘å¢åŠ æ ‡ç­¾å­—æ®µ**ï¼š
```json
{
  "title": "å¸–å­æ ‡é¢˜",
  "content": "å¸–å­å†…å®¹",
  "categoryId": 1,
  "tagIds": [1, 2, 3]  // æ–°å¢ï¼šæ ‡ç­¾IDæ•°ç»„
}
```

#### 3.2.4 å‰ç«¯å±•ç¤º

**æ ‡ç­¾é€‰æ‹©å™¨**ï¼ˆå‘å¸–æ—¶ï¼‰ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹©æ ‡ç­¾ï¼ˆæœ€å¤š5ä¸ªï¼‰                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ #Java  #Spring  #MySQL  #Redis  â”‚ â”‚
â”‚ â”‚ #Vue   #ç®—æ³•    #æ¶æ„   #é¢è¯•   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ å·²é€‰æ‹©ï¼š#Java #Spring #MySQL        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸–å­å¡ç‰‡å±•ç¤ºæ ‡ç­¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ‡é¢˜ï¼šSpring Bootæœ€ä½³å®è·µ        â”‚
â”‚ #Java #Spring #åç«¯              â”‚
â”‚ å¼ ä¸‰ Â· 3åˆ†é’Ÿå‰ Â· æŠ€æœ¯åˆ†äº«        â”‚
â”‚ ğŸ‘ 12  ğŸ’¬ 5  â­ 3                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 äºŒçº§è¯„è®ºå›å¤

#### 3.3.1 åŠŸèƒ½è¯´æ˜
- **è¯„è®ºå±‚çº§**ï¼šæ”¯æŒä¸€çº§è¯„è®ºå’ŒäºŒçº§å›å¤
- **å›å¤å±•ç¤º**ï¼šå±•å¼€/æ”¶èµ·äºŒçº§å›å¤
- **å›å¤é€šçŸ¥**ï¼šè¢«å›å¤ç”¨æˆ·æ”¶åˆ°æ¶ˆæ¯é€šçŸ¥
- **@åŠŸèƒ½**ï¼šæ”¯æŒ@æåŠç”¨æˆ·

#### 3.3.2 æ•°æ®åº“è°ƒæ•´

**è¯„è®ºè¡¨å¢åŠ å­—æ®µ**ï¼š
```sql
ALTER TABLE community_comment 
ADD COLUMN reply_to_id BIGINT COMMENT 'å›å¤çš„è¯„è®ºIDï¼ŒNULLè¡¨ç¤ºä¸€çº§è¯„è®º',
ADD COLUMN reply_to_user_id BIGINT COMMENT 'å›å¤çš„ç”¨æˆ·ID',
ADD COLUMN reply_to_user_name VARCHAR(50) COMMENT 'å›å¤çš„ç”¨æˆ·å',
ADD COLUMN reply_count INT DEFAULT 0 COMMENT 'å›å¤æ•°é‡ï¼ˆä»…ä¸€çº§è¯„è®ºæœ‰æ•ˆï¼‰',
ADD INDEX idx_parent_id (parent_id),
ADD INDEX idx_reply_to_id (reply_to_id);
```

#### 3.3.3 æ¥å£è°ƒæ•´

**è¯„è®ºåˆ—è¡¨æ¥å£å¢å¼º**ï¼š
```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "postId": 100,
        "content": "è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼",
        "authorId": 10,
        "authorName": "å¼ ä¸‰",
        "likeCount": 5,
        "replyCount": 2,
        "createTime": "2025-10-01 12:00:00",
        "replies": [  // äºŒçº§å›å¤ï¼ˆæœ€å¤šå±•ç¤º2æ¡ï¼‰
          {
            "id": 2,
            "content": "åŒæ„ï¼Œå­¦åˆ°äº†å¾ˆå¤š",
            "authorId": 11,
            "authorName": "æå››",
            "replyToUserId": 10,
            "replyToUserName": "å¼ ä¸‰",
            "createTime": "2025-10-01 12:05:00"
          }
        ],
        "hasMoreReplies": true  // æ˜¯å¦æœ‰æ›´å¤šå›å¤
      }
    ],
    "total": 50
  }
}
```

**æ–°å¢æ¥å£**ï¼š
```
POST /community/comments/{id}/reply      # å›å¤è¯„è®º
GET  /community/comments/{id}/replies    # è·å–è¯„è®ºçš„å›å¤åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
```

#### 3.3.4 å‰ç«¯å±•ç¤º

**è¯„è®ºåŒºç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ è¯„è®º (5)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¤´åƒ] å¼ ä¸‰  3åˆ†é’Ÿå‰                      â”‚
â”‚        è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼                 â”‚
â”‚        ğŸ‘ 5  [å›å¤]                       â”‚
â”‚   â””â”€ [å¤´åƒ] æå›› å›å¤ å¼ ä¸‰  2åˆ†é’Ÿå‰      â”‚
â”‚            åŒæ„ï¼Œå­¦åˆ°äº†å¾ˆå¤š               â”‚
â”‚            ğŸ‘ 2  [å›å¤]                   â”‚
â”‚   â””â”€ [å¤´åƒ] ç‹äº” å›å¤ å¼ ä¸‰  1åˆ†é’Ÿå‰      â”‚
â”‚            èµåŒ                           â”‚
â”‚            ğŸ‘ 1  [å›å¤]                   â”‚
â”‚        [å±•å¼€æ›´å¤š2æ¡å›å¤ â–¼]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¤´åƒ] èµµå…­  5åˆ†é’Ÿå‰                      â”‚
â”‚        æœ‰ç–‘é—®ï¼Œèƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ             â”‚
â”‚        ğŸ‘ 3  [å›å¤]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 è‰ç¨¿ä¿å­˜åŠŸèƒ½

#### 3.4.1 åŠŸèƒ½è¯´æ˜
- **è‡ªåŠ¨ä¿å­˜**ï¼šç¼–è¾‘5ç§’åè‡ªåŠ¨ä¿å­˜åˆ°localStorage
- **è‰ç¨¿æ¢å¤**ï¼šæ‰“å¼€ç¼–è¾‘é¡µé¢æ—¶æç¤ºæ¢å¤è‰ç¨¿
- **å¤šè‰ç¨¿ç®¡ç†**ï¼šæ”¯æŒå¤šä¸ªè‰ç¨¿ï¼ˆåˆ›å»ºå¸–å­ã€ç¼–è¾‘å¸–å­ï¼‰
- **è‰ç¨¿æ¸…ç†**ï¼šå‘å¸ƒæˆåŠŸåè‡ªåŠ¨æ¸…ç†è‰ç¨¿

#### 3.4.2 å®ç°æ–¹æ¡ˆ

**å‰ç«¯LocalStorageè®¾è®¡**ï¼š
```javascript
// è‰ç¨¿Keyæ ¼å¼
const DRAFT_KEY = {
  CREATE: 'community_draft_create',      // åˆ›å»ºå¸–å­è‰ç¨¿
  EDIT: 'community_draft_edit_{postId}'  // ç¼–è¾‘å¸–å­è‰ç¨¿
}

// è‰ç¨¿æ•°æ®ç»“æ„
{
  "title": "å¸–å­æ ‡é¢˜",
  "content": "å¸–å­å†…å®¹",
  "categoryId": 1,
  "tagIds": [1, 2],
  "saveTime": "2025-10-01 12:00:00",
  "version": "1.1.0"
}
```

**è‡ªåŠ¨ä¿å­˜é€»è¾‘**ï¼š
```javascript
// ä½¿ç”¨é˜²æŠ–ï¼Œ5ç§’åä¿å­˜
const saveDraft = debounce(() => {
  const draft = {
    title: form.title,
    content: form.content,
    categoryId: form.categoryId,
    tagIds: form.tagIds,
    saveTime: new Date().toISOString(),
    version: '1.1.0'
  }
  localStorage.setItem(DRAFT_KEY.CREATE, JSON.stringify(draft))
  ElMessage.success('è‰ç¨¿å·²è‡ªåŠ¨ä¿å­˜')
}, 5000)
```

**è‰ç¨¿æ¢å¤æç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ æ£€æµ‹åˆ°æœªå‘å¸ƒçš„è‰ç¨¿                â”‚
â”‚                                     â”‚
â”‚ ä¿å­˜æ—¶é—´ï¼š2025-10-01 12:00:00       â”‚
â”‚                                     â”‚
â”‚ [æ¢å¤è‰ç¨¿]  [æ”¾å¼ƒè‰ç¨¿]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 ç”¨æˆ·ä¸ªäººä¸»é¡µ

#### 3.5.1 åŠŸèƒ½è¯´æ˜
- **ä¸ªäººä¿¡æ¯**ï¼šå±•ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆå¤´åƒã€æ˜µç§°ã€ç®€ä»‹ï¼‰
- **ç»Ÿè®¡æ•°æ®**ï¼šå‘å¸–æ•°ã€è·èµæ•°ã€è¯„è®ºæ•°ã€æ”¶è—æ•°
- **å¸–å­åˆ—è¡¨**ï¼šå±•ç¤ºç”¨æˆ·å‘å¸ƒçš„æ‰€æœ‰å¸–å­ï¼ˆåˆ†é¡µï¼‰
- **æ´»è·ƒæ ‡ç­¾**ï¼šå±•ç¤ºç”¨æˆ·å¸¸ç”¨çš„æ ‡ç­¾
- **è®¿é—®å…¥å£**ï¼šç‚¹å‡»ç”¨æˆ·å¤´åƒ/æ˜µç§°è¿›å…¥

#### 3.5.2 æ¥å£è®¾è®¡

**ç”¨æˆ·ä¸»é¡µæ¥å£**ï¼š
```
GET /community/users/{userId}/profile

å“åº”ï¼š
{
  "code": 200,
  "data": {
    "userId": 123,
    "userName": "å¼ ä¸‰",
    "avatar": "https://...",
    "bio": "çƒ­çˆ±æŠ€æœ¯çš„ç¨‹åºå‘˜",
    "stats": {
      "postCount": 28,
      "likeCount": 156,
      "commentCount": 89,
      "collectCount": 45
    },
    "activeTags": [
      {"id": 1, "name": "Java", "count": 15},
      {"id": 2, "name": "Spring", "count": 12}
    ],
    "recentPosts": [...]  // æœ€è¿‘3ç¯‡å¸–å­
  }
}
```

**ç”¨æˆ·å¸–å­åˆ—è¡¨**ï¼š
```
POST /community/users/{userId}/posts
å‚æ•°ï¼š
{
  "pageNum": 1,
  "pageSize": 10,
  "categoryId": null,  // å¯é€‰ï¼šæŒ‰åˆ†ç±»ç­›é€‰
  "tagId": null        // å¯é€‰ï¼šæŒ‰æ ‡ç­¾ç­›é€‰
}
```

#### 3.5.3 å‰ç«¯å±•ç¤º

**ç”¨æˆ·ä¸»é¡µå¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [è¿”å›]                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ â”‚ å¤´åƒ  â”‚  å¼ ä¸‰                            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜  çƒ­çˆ±æŠ€æœ¯çš„ç¨‹åºå‘˜               â”‚
â”‚                                           â”‚
â”‚ ğŸ“ 28 ç¯‡å¸–å­  ğŸ‘ 156 è·èµ  ğŸ’¬ 89 è¯„è®º     â”‚
â”‚                                           â”‚
â”‚ å¸¸ç”¨æ ‡ç­¾ï¼š#Java #Spring #MySQL            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Taçš„å¸–å­                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¸–å­å¡ç‰‡1]                               â”‚
â”‚ [å¸–å­å¡ç‰‡2]                               â”‚
â”‚ [å¸–å­å¡ç‰‡3]                               â”‚
â”‚ ...                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 å¸–å­AIæ‘˜è¦ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

#### 3.6.1 åŠŸèƒ½è¯´æ˜
- **AIæ‘˜è¦ç”Ÿæˆ**ï¼šè‡ªåŠ¨ä¸ºé•¿æ–‡å¸–å­ç”Ÿæˆæ‘˜è¦
- **è§¦å‘æ—¶æœº**ï¼šå¸–å­å†…å®¹è¶…è¿‡500å­—æ—¶è‡ªåŠ¨ç”Ÿæˆ
- **å±•ç¤ºä½ç½®**ï¼šå¸–å­åˆ—è¡¨æ˜¾ç¤ºæ‘˜è¦ï¼Œè¯¦æƒ…é¡µæ˜¾ç¤ºå®Œæ•´å†…å®¹
- **æ‰‹åŠ¨åˆ·æ–°**ï¼šæ”¯æŒé‡æ–°ç”Ÿæˆæ‘˜è¦

#### 3.6.2 Cozeå·¥ä½œæµé›†æˆ

**å·¥ä½œæµé…ç½®**ï¼š

**è¾“å…¥å˜é‡**ï¼š
- `title` (string): å¸–å­æ ‡é¢˜
- `content` (string): å¸–å­å®Œæ•´å†…å®¹

**è¾“å‡ºå˜é‡**ï¼š
- `summary` (string): å¸–å­æ‘˜è¦ï¼ˆ200å­—ä»¥å†…ï¼‰
- `keywords` (array): å…³é”®è¯åˆ—è¡¨ï¼ˆ3-5ä¸ªï¼‰

**æç¤ºè¯**ï¼š
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯å†…å®¹åˆ†æåŠ©æ‰‹ã€‚è¯·ä¸ºä»¥ä¸‹æŠ€æœ¯ç¤¾åŒºå¸–å­ç”Ÿæˆæ‘˜è¦å’Œå…³é”®è¯ï¼š

æ ‡é¢˜ï¼š{{title}}
å†…å®¹ï¼š{{content}}

ä»»åŠ¡è¦æ±‚ï¼š
1. ç”Ÿæˆ200å­—ä»¥å†…çš„æ‘˜è¦ï¼Œæå–æ ¸å¿ƒæŠ€æœ¯ç‚¹å’Œå…³é”®ä¿¡æ¯
2. æå–3-5ä¸ªæŠ€æœ¯å…³é”®è¯ï¼ˆå¦‚ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ã€æŠ€æœ¯æ¦‚å¿µç­‰ï¼‰
3. ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºï¼š

{
  "summary": "æ‘˜è¦å†…å®¹...",
  "keywords": ["å…³é”®è¯1", "å…³é”®è¯2", "å…³é”®è¯3"]
}

æ³¨æ„ï¼šæ‘˜è¦è¦ç®€æ´ä¸“ä¸šï¼Œå…³é”®è¯è¦å‡†ç¡®åæ˜ æŠ€æœ¯ä¸»é¢˜ã€‚
```

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼š
title: "Spring Booté›†æˆRediså®ç°åˆ†å¸ƒå¼ç¼“å­˜"
content: "æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨Spring Bootä¸­é›†æˆRedis..."

è¾“å‡ºï¼š
{
  "summary": "æœ¬æ–‡ä»‹ç»äº†åœ¨Spring Booté¡¹ç›®ä¸­é›†æˆRediså®ç°åˆ†å¸ƒå¼ç¼“å­˜çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ä¾èµ–é…ç½®ã€è¿æ¥è®¾ç½®å’Œä½¿ç”¨æ–¹æ³•ï¼Œé€‚åˆå¾®æœåŠ¡æ¶æ„æ€§èƒ½ä¼˜åŒ–ã€‚",
  "keywords": ["Spring Boot", "Redis", "åˆ†å¸ƒå¼ç¼“å­˜", "å¾®æœåŠ¡"]
}
```

#### 3.6.3 æ•°æ®åº“è®¾è®¡

**å¸–å­è¡¨å¢åŠ å­—æ®µ**ï¼š
```sql
ALTER TABLE community_post
ADD COLUMN ai_summary TEXT COMMENT 'AIç”Ÿæˆçš„æ‘˜è¦',
ADD COLUMN ai_keywords VARCHAR(200) COMMENT 'AIæå–çš„å…³é”®è¯ï¼Œé€—å·åˆ†éš”',
ADD COLUMN ai_generate_time DATETIME COMMENT 'AIç”Ÿæˆæ—¶é—´';
```

#### 3.6.4 æ¥å£è®¾è®¡

```
POST /community/posts/{id}/generate-summary  # ç”ŸæˆAIæ‘˜è¦ï¼ˆæ‰‹åŠ¨è§¦å‘ï¼‰
GET  /community/posts/{id}/summary           # è·å–å¸–å­æ‘˜è¦
```

#### 3.6.5 ç¼“å­˜ç­–ç•¥

**Redisç¼“å­˜**ï¼š
```
Key: community:post:summary:{postId}
Value: {"summary": "...", "keywords": [...]}
TTL: 30å¤©
```

### 3.7 æœç´¢åŠŸèƒ½å¢å¼º

#### 3.7.1 å…¨æ–‡ç´¢å¼•ä¼˜åŒ–

**æ·»åŠ å…¨æ–‡ç´¢å¼•**ï¼š
```sql
ALTER TABLE community_post
ADD FULLTEXT INDEX ft_title_content (title, content) WITH PARSER ngram;
```

**æœç´¢æŸ¥è¯¢ä¼˜åŒ–**ï¼š
```sql
SELECT * FROM community_post
WHERE MATCH(title, content) AGAINST('å…³é”®è¯' IN NATURAL LANGUAGE MODE)
AND status = 1
ORDER BY (
    likeCount * 3 + commentCount * 5 + collectCount * 8 + viewCount * 0.1
) DESC
LIMIT 20;
```

#### 3.7.2 æœç´¢å»ºè®®

**çƒ­é—¨æœç´¢è¯**ï¼š
```
Rediså­˜å‚¨ï¼š
Key: community:hot:keywords
Type: Sorted Set
Score: æœç´¢æ¬¡æ•°
TTL: 7å¤©
```

#### 3.7.3 æœç´¢å†å²

**ç”¨æˆ·æœç´¢å†å²**ï¼ˆå‰ç«¯LocalStorageï¼‰ï¼š
```javascript
{
  "userId": 123,
  "keywords": [
    {"keyword": "Spring Boot", "time": "2025-10-01 12:00:00"},
    {"keyword": "Redis", "time": "2025-10-01 11:30:00"}
  ]
}
```

### 3.8 æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

#### 3.8.1 Redisç¼“å­˜ç­–ç•¥

**ç¼“å­˜å†…å®¹**ï¼š
| ç¼“å­˜é¡¹ | Keyæ ¼å¼ | TTL | è¯´æ˜ |
|--------|---------|-----|------|
| çƒ­é—¨å¸–å­åˆ—è¡¨ | community:hot:posts | 10åˆ†é’Ÿ | Sorted Set |
| å¸–å­è¯¦æƒ… | community:post:{id} | 30åˆ†é’Ÿ | String |
| ç”¨æˆ·ä¿¡æ¯ | community:user:{id} | 1å°æ—¶ | Hash |
| åˆ†ç±»åˆ—è¡¨ | community:categories | 1å¤© | List |
| æ ‡ç­¾åˆ—è¡¨ | community:tags | 1å¤© | List |
| å¸–å­ç‚¹èµçŠ¶æ€ | community:post:like:{userId} | 1å°æ—¶ | Set |
| å¸–å­æ”¶è—çŠ¶æ€ | community:post:collect:{userId} | 1å°æ—¶ | Set |

**ç¼“å­˜æ›´æ–°ç­–ç•¥**ï¼š
- **ä¸»åŠ¨æ›´æ–°**ï¼šæ•°æ®å˜æ›´æ—¶ç«‹å³æ›´æ–°ç¼“å­˜
- **è¢«åŠ¨å¤±æ•ˆ**ï¼šTTLè¿‡æœŸè‡ªåŠ¨å¤±æ•ˆ
- **ç©¿é€é˜²æŠ¤**ï¼šç©ºå€¼ç¼“å­˜ï¼Œé˜²æ­¢ç¼“å­˜ç©¿é€

#### 3.8.2 æ•°æ®åº“ä¼˜åŒ–

**ç´¢å¼•ä¼˜åŒ–**ï¼š
```sql
-- å¸–å­è¡¨
ALTER TABLE community_post
ADD INDEX idx_status_top_time (status, is_top DESC, create_time DESC),
ADD INDEX idx_category_status_time (category_id, status, create_time DESC),
ADD INDEX idx_author_status_time (author_id, status, create_time DESC),
ADD INDEX idx_hot_score (status, create_time, like_count, comment_count);

-- è¯„è®ºè¡¨
ALTER TABLE community_comment
ADD INDEX idx_post_parent_time (post_id, parent_id, create_time DESC),
ADD INDEX idx_author_time (author_id, create_time DESC);

-- ç‚¹èµè¡¨
ALTER TABLE community_post_like
ADD INDEX idx_user_time (user_id, create_time DESC);

-- æ”¶è—è¡¨
ALTER TABLE community_post_collect
ADD INDEX idx_user_time (user_id, create_time DESC);
```

**æŸ¥è¯¢ä¼˜åŒ–**ï¼š
- é¿å…SELECT *ï¼ŒåªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
- ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œå‡å°‘å›è¡¨
- æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå‡å°‘N+1æŸ¥è¯¢

#### 3.8.3 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

**è™šæ‹Ÿæ»šåŠ¨**ï¼š
```vue
<template>
  <RecycleScroller
    :items="postList"
    :item-size="300"
    :buffer="600"
    key-field="id"
    class="scroller"
  >
    <template #default="{ item }">
      <PostCard :post="item" />
    </template>
  </RecycleScroller>
</template>
```

**å›¾ç‰‡æ‡’åŠ è½½**ï¼š
```vue
<el-image
  :src="post.coverImage"
  loading="lazy"
  :preview-src-list="[post.coverImage]"
/>
```

**æ— é™æ»šåŠ¨**ï¼š
```javascript
const handleScroll = () => {
  const scrollTop = document.documentElement.scrollTop
  const clientHeight = document.documentElement.clientHeight
  const scrollHeight = document.documentElement.scrollHeight
  
  if (scrollTop + clientHeight >= scrollHeight - 200 && !loading.value) {
    loadMorePosts()
  }
}
```

### 3.9 ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 3.9.1 ç›¸å¯¹æ—¶é—´æ˜¾ç¤º

**æ—¶é—´æ ¼å¼åŒ–è§„åˆ™**ï¼š
```javascript
const formatRelativeTime = (dateStr) => {
  const now = new Date()
  const date = new Date(dateStr)
  const diff = (now - date) / 1000  // ç§’
  
  if (diff < 60) return 'åˆšåˆš'
  if (diff < 3600) return `${Math.floor(diff / 60)}åˆ†é’Ÿå‰`
  if (diff < 86400) return `${Math.floor(diff / 3600)}å°æ—¶å‰`
  if (diff < 604800) return `${Math.floor(diff / 86400)}å¤©å‰`
  
  // è¶…è¿‡7å¤©æ˜¾ç¤ºå…·ä½“æ—¥æœŸ
  return date.toLocaleDateString('zh-CN')
}
```

#### 3.9.2 è¡¨æƒ…é€‰æ‹©å™¨

**ä½¿ç”¨emoji-picker-element**ï¼š
```vue
<template>
  <emoji-picker
    @emoji-click="onEmojiClick"
    class="emoji-picker"
  />
</template>

<script setup>
const onEmojiClick = (event) => {
  const emoji = event.detail.unicode
  form.content += emoji
}
</script>
```

#### 3.9.3 Markdownç¼–è¾‘å™¨å¢å¼º

**åŠŸèƒ½å¢å¼º**ï¼š
- å®æ—¶é¢„è§ˆ
- å·¥å…·æ ï¼ˆåŠ ç²—ã€æ–œä½“ã€é“¾æ¥ã€å›¾ç‰‡ã€ä»£ç å—ç­‰ï¼‰
- ä»£ç é«˜äº®
- è¡¨æ ¼æ”¯æŒ
- å¿«æ·é”®æ”¯æŒ

**æ¨èç»„ä»¶**ï¼šä½¿ç”¨`v-md-editor`æˆ–`mavon-editor`

### 3.10 ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–

#### 3.10.1 å“åº”å¼å¸ƒå±€

**æ–­ç‚¹è®¾è®¡**ï¼š
```scss
// ç§»åŠ¨ç«¯
@media (max-width: 768px) {
  .post-card {
    padding: 12px;
    margin: 10px;
  }
  
  .post-title {
    font-size: 16px;
  }
}

// å¹³æ¿ç«¯
@media (min-width: 769px) and (max-width: 1199px) {
  .post-card {
    padding: 16px;
    margin: 15px;
  }
}

// æ¡Œé¢ç«¯
@media (min-width: 1200px) {
  .post-card {
    padding: 20px;
    margin: 20px;
  }
}
```

#### 3.10.2 ç§»åŠ¨ç«¯äº¤äº’ä¼˜åŒ–

- **ä¸‹æ‹‰åˆ·æ–°**ï¼šæ”¯æŒä¸‹æ‹‰åˆ·æ–°å¸–å­åˆ—è¡¨
- **è§¦æ‘¸ä¼˜åŒ–**ï¼šå¢å¤§ç‚¹å‡»åŒºåŸŸï¼ˆæœ€å°44pxï¼‰
- **è¾“å…¥ä¼˜åŒ–**ï¼šç§»åŠ¨ç«¯å¼¹å‡ºå…¨å±ç¼–è¾‘å™¨
- **å›¾ç‰‡æŸ¥çœ‹**ï¼šæ”¯æŒæ‰‹åŠ¿ç¼©æ”¾

---

## 4. æ•°æ®åº“å˜æ›´

### 4.1 æ–°å¢è¡¨

**æ ‡ç­¾è¡¨ï¼ˆcommunity_tagï¼‰**ï¼š
```sql
CREATE TABLE community_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ ‡ç­¾ID',
    name VARCHAR(50) NOT NULL COMMENT 'æ ‡ç­¾åç§°',
    description VARCHAR(200) COMMENT 'æ ‡ç­¾æè¿°',
    color VARCHAR(20) DEFAULT '#409EFF' COMMENT 'æ ‡ç­¾é¢œè‰²',
    icon VARCHAR(50) COMMENT 'æ ‡ç­¾å›¾æ ‡',
    post_count INT DEFAULT 0 COMMENT 'å¸–å­æ•°é‡',
    follow_count INT DEFAULT 0 COMMENT 'å…³æ³¨æ•°é‡',
    sort_order INT DEFAULT 0 COMMENT 'æ’åºé¡ºåº',
    status INT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¯ç”¨ï¼Œ0-ç¦ç”¨',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    UNIQUE KEY uk_name (name),
    INDEX idx_post_count (post_count DESC),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç¤¾åŒºæ ‡ç­¾è¡¨';
```

**å¸–å­æ ‡ç­¾å…³è”è¡¨ï¼ˆcommunity_post_tagï¼‰**ï¼š
```sql
CREATE TABLE community_post_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'å…³è”ID',
    post_id BIGINT NOT NULL COMMENT 'å¸–å­ID',
    tag_id BIGINT NOT NULL COMMENT 'æ ‡ç­¾ID',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    
    UNIQUE KEY uk_post_tag (post_id, tag_id),
    INDEX idx_post_id (post_id),
    INDEX idx_tag_id (tag_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å¸–å­æ ‡ç­¾å…³è”è¡¨';
```

### 4.2 å­—æ®µè°ƒæ•´

**å¸–å­è¡¨ï¼ˆcommunity_postï¼‰**ï¼š
```sql
ALTER TABLE community_post
ADD COLUMN ai_summary TEXT COMMENT 'AIç”Ÿæˆçš„æ‘˜è¦',
ADD COLUMN ai_keywords VARCHAR(200) COMMENT 'AIæå–çš„å…³é”®è¯ï¼Œé€—å·åˆ†éš”',
ADD COLUMN ai_generate_time DATETIME COMMENT 'AIç”Ÿæˆæ—¶é—´',
ADD FULLTEXT INDEX ft_title_content (title, content) WITH PARSER ngram;
```

**è¯„è®ºè¡¨ï¼ˆcommunity_commentï¼‰**ï¼š
```sql
ALTER TABLE community_comment
ADD COLUMN reply_to_id BIGINT COMMENT 'å›å¤çš„è¯„è®ºID',
ADD COLUMN reply_to_user_id BIGINT COMMENT 'å›å¤çš„ç”¨æˆ·ID',
ADD COLUMN reply_to_user_name VARCHAR(50) COMMENT 'å›å¤çš„ç”¨æˆ·å',
ADD COLUMN reply_count INT DEFAULT 0 COMMENT 'å›å¤æ•°é‡ï¼ˆä»…ä¸€çº§è¯„è®ºæœ‰æ•ˆï¼‰',
ADD INDEX idx_reply_to_id (reply_to_id);
```

### 4.3 ç´¢å¼•ä¼˜åŒ–

```sql
-- å¸–å­è¡¨ç´¢å¼•
ALTER TABLE community_post
ADD INDEX idx_status_top_time (status, is_top DESC, create_time DESC),
ADD INDEX idx_category_status_time (category_id, status, create_time DESC),
ADD INDEX idx_author_status_time (author_id, status, create_time DESC),
ADD INDEX idx_hot_score (status, create_time, like_count, comment_count);

-- è¯„è®ºè¡¨ç´¢å¼•
ALTER TABLE community_comment
ADD INDEX idx_post_parent_time (post_id, parent_id, create_time DESC);

-- ç‚¹èµè¡¨ç´¢å¼•
ALTER TABLE community_post_like
ADD INDEX idx_user_time (user_id, create_time DESC);

-- æ”¶è—è¡¨ç´¢å¼•
ALTER TABLE community_post_collect
ADD INDEX idx_user_time (user_id, create_time DESC);
```

---

## 5. æ¥å£è°ƒæ•´

### 5.1 æ–°å¢æ¥å£

#### 5.1.1 çƒ­é—¨æ¨è
```
GET  /community/posts/hot                     # è·å–çƒ­é—¨å¸–å­
```

#### 5.1.2 æ ‡ç­¾ç®¡ç†
```
# å‰å°
GET  /community/tags                          # è·å–å¯ç”¨çš„æ ‡ç­¾åˆ—è¡¨
GET  /community/tags/hot                      # è·å–çƒ­é—¨æ ‡ç­¾
GET  /community/tags/{id}/posts               # è·å–æ ‡ç­¾ä¸‹çš„å¸–å­

# åå°
POST   /admin/community/tags                  # åˆ›å»ºæ ‡ç­¾
PUT    /admin/community/tags/{id}             # æ›´æ–°æ ‡ç­¾
DELETE /admin/community/tags/{id}             # åˆ é™¤æ ‡ç­¾
POST   /admin/community/tags/list             # æ ‡ç­¾åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
```

#### 5.1.3 äºŒçº§è¯„è®º
```
POST /community/comments/{id}/reply           # å›å¤è¯„è®º
GET  /community/comments/{id}/replies         # è·å–è¯„è®ºçš„å›å¤åˆ—è¡¨
```

#### 5.1.4 ç”¨æˆ·ä¸»é¡µ
```
GET  /community/users/{userId}/profile        # è·å–ç”¨æˆ·ä¸»é¡µä¿¡æ¯
POST /community/users/{userId}/posts          # è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨
```

#### 5.1.5 AIæ‘˜è¦ï¼ˆå¯é€‰ï¼‰
```
POST /community/posts/{id}/generate-summary   # ç”ŸæˆAIæ‘˜è¦
GET  /community/posts/{id}/summary            # è·å–å¸–å­æ‘˜è¦
```

### 5.2 æ¥å£ä¼˜åŒ–

**å¸–å­åˆ—è¡¨æ¥å£å¢å¼º**ï¼š
```json
{
  "pageNum": 1,
  "pageSize": 10,
  "categoryId": null,
  "tagId": null,        // æ–°å¢ï¼šæŒ‰æ ‡ç­¾ç­›é€‰
  "keyword": null,
  "sortBy": "hot"       // æ–°å¢ï¼šæ’åºæ–¹å¼ï¼ˆhot-çƒ­åº¦ï¼Œtime-æ—¶é—´ï¼‰
}
```

**å¸–å­å“åº”å¢åŠ å­—æ®µ**ï¼š
```json
{
  "id": 123,
  "title": "æ ‡é¢˜",
  "content": "å†…å®¹",
  "summary": "AIç”Ÿæˆçš„æ‘˜è¦",    // æ–°å¢
  "tags": [                      // æ–°å¢
    {"id": 1, "name": "Java", "color": "#409EFF"}
  ],
  "hotScore": 285.5,             // æ–°å¢ï¼šçƒ­åº¦åˆ†æ•°
  "categoryName": "æŠ€æœ¯åˆ†äº«",
  "authorId": 10,
  "authorName": "å¼ ä¸‰",
  "viewCount": 189,
  "likeCount": 45,
  "commentCount": 23,
  "collectCount": 18,
  "isLiked": true,
  "isCollected": false,
  "createTime": "2025-10-01 12:00:00"
}
```

---

## 6. æŠ€æœ¯å®ç°

### 6.1 åç«¯æŠ€æœ¯æ ˆ

#### 6.1.1 æ–°å¢ä¾èµ–
```xml
<!-- pom.xml -->
<!-- Redisæ”¯æŒå·²æœ‰ï¼Œæ— éœ€æ–°å¢ -->
<!-- Cozeå·¥ä½œæµè°ƒç”¨ï¼ˆå¦‚éœ€AIåŠŸèƒ½ï¼‰ -->
<dependency>
    <groupId>com.squareup.okhttp3</groupId>
    <artifactId>okhttp</artifactId>
    <version>4.10.0</version>
</dependency>
```

#### 6.1.2 é…ç½®æ–‡ä»¶
```yaml
# application.yml
community:
  cache:
    hot-posts-ttl: 600          # çƒ­é—¨å¸–å­ç¼“å­˜10åˆ†é’Ÿ
    post-detail-ttl: 1800       # å¸–å­è¯¦æƒ…ç¼“å­˜30åˆ†é’Ÿ
    user-info-ttl: 3600         # ç”¨æˆ·ä¿¡æ¯ç¼“å­˜1å°æ—¶
  hot:
    time-range: 72              # çƒ­é—¨å¸–å­æ—¶é—´èŒƒå›´ï¼ˆå°æ—¶ï¼‰
    min-score: 30               # æœ€ä½çƒ­åº¦åˆ†æ•°
    limit: 10                   # çƒ­é—¨å¸–å­æ•°é‡
  ai:
    enabled: false              # æ˜¯å¦å¯ç”¨AIåŠŸèƒ½
    coze-workflow-id: ""        # Cozeå·¥ä½œæµID
```

### 6.2 å‰ç«¯æŠ€æœ¯æ ˆ

#### 6.2.1 æ–°å¢ä¾èµ–
```json
{
  "dependencies": {
    "vue-virtual-scroller": "^2.0.0-beta.8",  // è™šæ‹Ÿæ»šåŠ¨
    "emoji-picker-element": "^1.18.0",         // è¡¨æƒ…é€‰æ‹©å™¨
    "@kangc/v-md-editor": "^2.3.15",          // Markdownç¼–è¾‘å™¨
    "dayjs": "^1.11.10",                       // æ—¶é—´å¤„ç†
    "lodash-es": "^4.17.21"                    // å·¥å…·å‡½æ•°
  }
}
```

#### 6.2.2 ç»„ä»¶å°è£…

**æ–°å¢ç»„ä»¶**ï¼š
```
src/views/community/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ HotPosts.vue            # çƒ­é—¨å¸–å­å±•ç¤º
â”‚   â”œâ”€â”€ TagSelector.vue         # æ ‡ç­¾é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ CommentTree.vue         # è¯„è®ºæ ‘ï¼ˆæ”¯æŒäºŒçº§å›å¤ï¼‰
â”‚   â”œâ”€â”€ UserProfile.vue         # ç”¨æˆ·ä¸»é¡µ
â”‚   â”œâ”€â”€ DraftManager.vue        # è‰ç¨¿ç®¡ç†
â”‚   â””â”€â”€ MarkdownEditor.vue      # Markdownç¼–è¾‘å™¨å°è£…
```

---

## 7. å®æ–½è®¡åˆ’

### 7.1 å¼€å‘é˜¶æ®µ

| é˜¶æ®µ | å†…å®¹ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| ç¬¬ä¸€é˜¶æ®µ | çƒ­é—¨æ¨è+è¯é¢˜æ ‡ç­¾ | 3å¤© | P0 |
| ç¬¬äºŒé˜¶æ®µ | äºŒçº§è¯„è®º+ç”¨æˆ·ä¸»é¡µ | 3å¤© | P0 |
| ç¬¬ä¸‰é˜¶æ®µ | æ€§èƒ½ä¼˜åŒ–+ç¼“å­˜ | 2å¤© | P0 |
| ç¬¬å››é˜¶æ®µ | è‰ç¨¿ä¿å­˜+ä½“éªŒä¼˜åŒ– | 2å¤© | P1 |
| ç¬¬äº”é˜¶æ®µ | AIæ‘˜è¦ï¼ˆå¯é€‰ï¼‰ | 2å¤© | P2 |
| æµ‹è¯•ä¸Šçº¿ | æµ‹è¯•+éƒ¨ç½² | 1å¤© | - |

**æ€»è®¡**ï¼š13å¤©

### 7.2 æµ‹è¯•è¦ç‚¹

#### 7.2.1 åŠŸèƒ½æµ‹è¯•
- âœ… çƒ­é—¨å¸–å­æ¨èå‡†ç¡®æ€§
- âœ… æ ‡ç­¾ç®¡ç†å’Œç­›é€‰åŠŸèƒ½
- âœ… äºŒçº§è¯„è®ºæ˜¾ç¤ºå’Œå›å¤
- âœ… è‰ç¨¿ä¿å­˜å’Œæ¢å¤
- âœ… ç”¨æˆ·ä¸»é¡µæ•°æ®å±•ç¤º
- âœ… AIæ‘˜è¦ç”Ÿæˆï¼ˆå¯é€‰ï¼‰

#### 7.2.2 æ€§èƒ½æµ‹è¯•
- âœ… ç¼“å­˜å‘½ä¸­ç‡ >= 80%
- âœ… çƒ­é—¨å¸–å­æŸ¥è¯¢ < 100ms
- âœ… å¸–å­åˆ—è¡¨åŠ è½½ < 500ms
- âœ… é•¿åˆ—è¡¨ï¼ˆ1000+ï¼‰æµç•…æ»šåŠ¨

#### 7.2.3 å…¼å®¹æ€§æµ‹è¯•
- âœ… Chrome 80+
- âœ… Firefox 75+
- âœ… Safari 13+
- âœ… Edge 80+
- âœ… ç§»åŠ¨ç«¯æµè§ˆå™¨

---

## 8. é£é™©è¯„ä¼°ä¸åº”å¯¹

### 8.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ç¨‹åº¦ | åº”å¯¹ç­–ç•¥ |
|------|----------|----------|
| Redisç¼“å­˜å¤±æ•ˆ | ä¸­ | æ•°æ®åº“å…œåº•ï¼Œè‡ªåŠ¨é‡å»ºç¼“å­˜ |
| å…¨æ–‡ç´¢å¼•æ€§èƒ½ | ä¸­ | åˆ†è¡¨åˆ†åº“ï¼ŒElasticSearchæ–¹æ¡ˆå¤‡é€‰ |
| AIè°ƒç”¨å¤±è´¥ | ä½ | ç†”æ–­é™çº§ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ |
| è™šæ‹Ÿæ»šåŠ¨å…¼å®¹æ€§ | ä½ | å……åˆ†æµ‹è¯•ï¼Œå‡†å¤‡é™çº§æ–¹æ¡ˆ |

### 8.2 ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ç¨‹åº¦ | åº”å¯¹ç­–ç•¥ |
|------|----------|----------|
| çƒ­é—¨ç®—æ³•ä¸å‡†ç¡® | ä¸­ | A/Bæµ‹è¯•ï¼Œæ•°æ®é©±åŠ¨ä¼˜åŒ– |
| æ ‡ç­¾ä½“ç³»æ··ä¹± | ä¸­ | è¿è¥å¼•å¯¼ï¼Œæ ‡ç­¾å®¡æ ¸æœºåˆ¶ |
| äºŒçº§è¯„è®ºæ»¥ç”¨ | ä½ | æ•æ„Ÿè¯è¿‡æ»¤ï¼Œä¸¾æŠ¥æœºåˆ¶ |

---

## 9. æˆåŠŸæŒ‡æ ‡

### 9.1 æ€§èƒ½æŒ‡æ ‡
- å¸–å­åˆ—è¡¨é¦–å±åŠ è½½æ—¶é—´ < **500ms**
- çƒ­é—¨å¸–å­æŸ¥è¯¢å“åº”æ—¶é—´ < **100ms**
- Redisç¼“å­˜å‘½ä¸­ç‡ >= **80%**
- é•¿åˆ—è¡¨ï¼ˆ1000+ï¼‰æ»šåŠ¨å¸§ç‡ >= **55fps**

### 9.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- ç”¨æˆ·å¹³å‡åœç•™æ—¶é—´å¢åŠ  **30%**
- å¸–å­å‘å¸ƒé‡å¢åŠ  **25%**
- äº’åŠ¨ç‡ï¼ˆç‚¹èµ+è¯„è®º+æ”¶è—ï¼‰æå‡ **40%**
- ç”¨æˆ·æ—¥æ´»è·ƒåº¦æå‡ **20%**

### 9.3 åŠŸèƒ½ä½¿ç”¨ç‡
- çƒ­é—¨å¸–å­ç‚¹å‡»ç‡ >= **35%**
- æ ‡ç­¾ä½¿ç”¨ç‡ >= **60%**
- äºŒçº§è¯„è®ºå æ¯” >= **30%**
- è‰ç¨¿æ¢å¤ç‡ >= **40%**
- ç”¨æˆ·ä¸»é¡µè®¿é—®ç‡ >= **25%**


**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.1.0  
**æ›´æ–°æ—¥æœŸ**ï¼š2025å¹´10æœˆ3æ—¥  
**ç»´æŠ¤å›¢é˜Ÿ**ï¼šCode-Nestå¼€å‘å›¢é˜Ÿ

