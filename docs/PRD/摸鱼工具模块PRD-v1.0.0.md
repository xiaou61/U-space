# 摸鱼工具模块 PRD v1.0.0

## 📋 项目概述

### 🎯 项目背景
为了提升程序员的工作乐趣和信息获取效率，需要建立一个轻松有趣的摸鱼工具集合。该模块整合了程序员在工作间隙经常查看的热点信息，通过定时获取和缓存机制，提供快速、实时的信息浏览服务。

### 💡 核心价值
- **信息聚合**: 集成各大平台热榜，一站式获取热点信息
- **实时更新**: 定时刷新数据，保证信息时效性  
- **缓存优化**: Redis存储提升访问速度
- **工作调剂**: 为紧张的开发工作提供轻松的信息浏览体验
- **收入可视化**: 实时计算工作收入，提升工作积极性和成就感
- **技能提升**: 通过Bug商店随机学习经典问题，提升技术能力
- **面试准备**: 系统化的八股问题库，助力面试准备

## 🚀 功能需求

### 1. 今日热榜 (Hot Topics)

#### 1.1 数据获取
- **API接口**: 调用 http://113.44.190.45:9996/api 获取热榜数据
- **定时任务**: 每15分钟自动获取一次最新数据
- **数据覆盖**: 支持27个平台热榜，包括微博、知乎、抖音等主流平台
- **分类展示**: 按社交媒体、知识社区、新闻资讯、科技数码等分类显示

#### 1.2 数据存储
- **Redis缓存**: 将获取的热榜数据存储到Redis中
- **键名规范**: 使用 `hot_topics:latest` 作为主键
- **过期策略**: 设置16分钟过期时间，确保数据及时更新
- **备份机制**: 保留上一次数据作为降级方案

#### 1.3 前端展示
- **卡片布局**: 每个平台热榜使用独立卡片展示
- **实时刷新**: 前端每15分钟自动刷新数据
- **分类筛选**: 支持按平台类别筛选热榜内容
- **快速访问**: 点击热榜条目直接跳转到原文

### 2. 打工人时薪计算 (Hourly Rate Calculator)

#### 2.1 薪资配置管理
- **参数配置**: 月薪、每月工作天数、每日工作小时数
- **实时预览**: 配置时实时显示计算出的时薪
- **数据验证**: 参数合理性验证和提示
- **配置持久**: 数据库存储用户薪资配置

#### 2.2 工作状态管理
- **工作控制**: 支持开始、暂停、恢复、结束工作操作
- **状态追踪**: 实时跟踪工作状态（未开始/进行中/暂停中/已完成）
- **时间记录**: 精确记录开始时间、暂停时长、结束时间
- **每日唯一**: 每个用户每天只能有一条工作记录

#### 2.3 实时收入计算
- **动态显示**: 工作中每秒实时更新已工作时长和收入
- **暂停处理**: 自动扣除暂停时间，确保计算准确性
- **视觉反馈**: 实时收入数字跳动动画和状态指示
- **多状态支持**: 根据不同工作状态显示不同的界面和提示

#### 2.4 统计分析功能
- **今日统计**: 实时显示当日工作时长和收入
- **本周汇总**: 累计本周总工作时长和总收入
- **本月汇总**: 累计本月总工作时长和总收入
- **趋势展示**: 通过卡片形式直观显示收入趋势

### 3. 程序员日历 (Developer Calendar)

#### 3.1 节日纪念功能
- **程序员节日**: 1024程序员节、世界编程日等特殊节日提醒
- **技术纪念日**: 重要编程语言诞生日、技术里程碑事件
- **开源节日**: GitHub开源日、Linux发布纪念日等
- **节日祝福**: 节日当天显示特别祝福和活动推荐

#### 3.2 每日内容推送
- **编程格言**: 每日推送编程相关的励志名言和格言
- **技术小贴士**: 实用的编程技巧和最佳实践分享
- **代码片段**: 精选的代码示例和算法讲解
- **历史上的今天**: 编程技术史上的重要事件回顾

#### 3.3 日历视图展示
- **月视图**: 以日历形式展示当月的特殊日期和事件
- **日期标记**: 特殊日期用不同颜色和图标标记
- **快速切换**: 支持月份快速切换和今日定位
- **事件详情**: 点击日期查看详细的事件信息和内容

#### 3.4 个性化设置
- **提醒设置**: 可自定义节日和事件的提醒开关
- **内容偏好**: 选择感兴趣的编程语言和技术方向
- **历史记录**: 查看之前浏览过的节日和内容
- **收藏功能**: 收藏喜欢的格言和技术贴士

### 4. Bug 商店 (Bug Store)

#### 4.1 内容管理功能
- **内容类型**: 只支持经典Bug一种类型
- **后台添加**: 管理员可在后台添加、编辑、删除Bug
- **内容结构**: 每条Bug包含标题、现象描述、原因分析、解决方案、技术标签、难度等级
- **批量导入**: 支持Excel批量导入Bug数据
- **内容审核**: 新增Bug支持审核机制，确保内容质量

#### 4.2 随机展示功能
- **随机算法**: 使用简单随机算法，随机展示Bug
- **刷新机制**: 支持手动刷新获取新的随机Bug
- **防重复**: 短时间内避免重复展示相同Bug

#### 4.3 经典Bug展示
- **Bug标题**: 简洁明了的Bug描述标题
- **Bug现象**: 详细描述Bug的表现症状
- **原因分析**: 深入分析Bug产生的根本原因
- **解决方案**: 提供多种解决方案和最佳实践
- **技术标签**: 标注涉及的编程语言、框架、工具等
- **难度分级**: 初级/中级/高级/专家级难度标识

#### 4.4 基础功能
- **分享功能**: 支持复制内容到剪贴板
- **标记已读**: 自动记录用户已查看的内容，避免短期重复

## 🔧 技术实现方案

### 1. 后端技术栈
- **定时任务**: 使用Spring Boot的@Scheduled注解
- **HTTP客户端**: 使用RestTemplate调用外部API  
- **缓存存储**: Redis存储热榜数据
- **数据持久**: MySQL存储用户配置和工作记录
- **ORM框架**: MyBatis处理数据库操作
- **异常处理**: 网络异常时使用缓存数据降级
- **参数验证**: Jakarta Validation进行请求参数验证
- **日志记录**: 自定义@Log注解记录操作日志

### 2. 数据流程

#### 2.1 热榜数据流程
1. 定时任务每15分钟执行一次
2. 调用外部API获取最新热榜数据
3. 数据处理和格式化
4. 存储到Redis并设置过期时间
5. 前端通过接口获取缓存数据

#### 2.2 薪资计算器数据流程
1. 用户首次使用时配置薪资信息存入数据库
2. 用户开始工作时创建当日工作记录
3. 系统根据工作状态和时间实时计算收入
4. 暂停/恢复操作更新工作记录状态
5. 前端定时器每秒获取最新收入数据
6. 结束工作时完成当日记录并计算最终收入

#### 2.3 Bug商店数据流程
1. 管理员通过后台管理系统添加Bug内容
2. Bug内容保存到MySQL数据库并建立索引
3. 用户请求随机Bug时调用随机算法接口
4. 系统从数据库中随机筛选Bug并返回
5. 记录用户浏览历史避免短期重复展示

### 3. 性能优化
- **异步处理**: 定时任务异步执行，不影响主业务
- **连接池**: 使用连接池优化HTTP请求性能
- **数据压缩**: 对存储数据进行压缩减少内存占用

## 📱 用户体验流程

### 1. 今日热榜使用流程
1. 用户点击摸鱼工具菜单
2. 进入今日热榜页面
3. 系统从Redis获取最新热榜数据
4. 按分类展示各平台热榜内容
5. 用户点击感兴趣的热榜条目查看详情

### 2. 打工人时薪计算使用流程
1. 用户进入时薪计算器页面
2. 首次使用配置月薪和工作参数
3. 系统实时计算并显示当前收入状态
4. 查看今日/本周收入统计和工作进度

### 3. 程序员日历使用流程
1. 用户进入程序员日历页面
2. 查看当月日历视图和特殊日期标记
3. 点击日期查看当日的编程内容和节日信息
4. 浏览每日推送的编程格言和技术贴士
5. 设置个性化偏好和提醒功能

### 4. Bug 商店使用流程
1. 用户进入Bug商店页面
2. 点击"来一发Bug"按钮随机获取Bug
3. 阅读Bug详情（现象、原因、解决方案）
4. 可复制内容到剪贴板进行分享
5. 继续点击刷新获取更多Bug

## ✅ 实现范围

### 第一期功能
- ✅ **热榜数据获取**: 每15分钟调用API获取热榜数据
- ✅ **Redis缓存存储**: 将数据存储到Redis提升访问速度  
- ✅ **热榜前端展示**: 简洁的热榜列表展示界面
- ✅ **分类筛选**: 支持按平台类型筛选热榜内容

### 第二期功能  
- ✅ **时薪计算器**: 支持月薪参数配置和实时计算
- ✅ **收入统计**: 今日/本周/本月收入和工作时长统计
- ✅ **工作状态管理**: 支持开始/暂停/恢复/结束工作操作
- ✅ **实时收入显示**: 工作中实时计算并显示当前收入
- ✅ **数据持久化**: 用户配置和工作记录数据库存储

### 第三期功能
- 🔲 **程序员日历**: 编程节日和纪念日展示
- 🔲 **每日内容**: 编程格言、技术贴士、代码片段推送
- 🔲 **日历视图**: 月视图展示和特殊日期标记
- 🔲 **个性化设置**: 提醒设置、内容偏好、收藏功能

### 第四期功能
- 🔲 **Bug 商店**: 随机展示经典Bug
- 🔲 **内容管理**: 后台管理Bug的增删改查
- 🔲 **随机算法**: 实现防重复的简单随机展示机制
- 🔲 **基础功能**: 复制分享、标记已读功能
- 🔲 **批量导入**: 支持Excel批量导入Bug数据

### 技术特点
- **轻量实现**: 核心功能简洁高效
- **稳定可靠**: 异常处理和降级机制完善
- **扩展性强**: 架构支持后续功能扩展
