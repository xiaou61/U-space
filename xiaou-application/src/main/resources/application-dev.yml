spring:
  datasource:
    # 使用 P6Spy 代理驱动（开发环境，用于SQL日志监控）
    driver-class-name: com.p6spy.engine.spy.P6SpyDriver
    # P6Spy 格式的 JDBC URL（在原 jdbc:mysql 前加 p6spy:）
    url: jdbc:p6spy:mysql://localhost:3306/code_nest?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8
    username: root
    password: 1234
  
  # Redis配置（适用于Redisson）
  data:
    redis:
      # 使用Redisson配置（业务数据使用 database 3）
      redisson:
        config: |
          singleServerConfig:
            address: "redis://127.0.0.1:6379"
            database: 3
            connectionMinimumIdleSize: 10
            connectionPoolSize: 64
            idleConnectionTimeout: 10000
            connectTimeout: 10000
            timeout: 3000
            retryAttempts: 3
            retryInterval: 1500
          threads: 16
          nettyThreads: 32
  
  # Spring Security 配置
  security:
    user:
      # 禁用默认用户
      name: disabled
      password: disabled
      roles: disabled

# Sa-Token 独立 Redis 配置（开发环境）
sa-token:
  alone-redis:
    # Redis 服务器地址
    host: 127.0.0.1
    # Redis 端口
    port: 6379
    # Redis 数据库索引（使用 database 4，与业务数据隔离）
    database: 4
    # Redis 连接超时时间（毫秒）
    timeout: 10000
    # 连接池配置
    jedis:
      pool:
        # 连接池最大连接数
        max-active: 8
        # 连接池最大空闲连接数
        max-idle: 8
        # 连接池最小空闲连接数
        min-idle: 0
        # 连接池最大阻塞等待时间（毫秒）
        max-wait: 3000